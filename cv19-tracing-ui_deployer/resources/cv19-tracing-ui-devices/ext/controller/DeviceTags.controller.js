sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,i,n,o){"use strict";return e.extend("covid19.ui.devicesmanagement.cv19-tracing-ui-devices.ext.controller.DeviceTags",{onAfterRendering:function(){},handleAddTag:function(e){var i=e.getSource();if(!this._oDialog){t.load({name:"covid19.ui.devicesmanagement.cv19-tracing-ui-devices.ext.fragment.TagDialog",controller:this}).then(function(e){this._oDialog=e;this._oDialog.setModel(this.getView().getModel());this.getView().addDependent(this._oDialog);this._oDialog.open()}.bind(this))}else{this._oDialog.open()}},handleDelete:function(e){var t=e.getSource(),i=e.getParameter("listItem"),n=this.getView().getBindingContext(),o=n.getModel(),a=i.getBindingContext().getPath();o.remove(a);o.refresh()},onSearch:function(e){var t=e.getParameter("value");var o=new i("Value",n.Contains,t);var a=e.getParameter("itemsBinding");a.filter([o])},onDialogConfirm:function(e){var t=e.getParameter("selectedItem"),i=null,n=this.getView().getBindingContext(),a=n.getProperty("DeviceID"),r=n.getModel();if(t!==null){i=t.getBindingContext();var g=i.getProperty("Key");r.create("/DeviceTagSet",{DeviceID:a,TagKey:g},{success:function(e){o.show("Tag added to the device");r.refresh(true)},error:function(e){o.show("Selected tag is already assignes to current device")}})}}})});